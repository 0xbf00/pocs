#include <xpc/xpc.h>

#define DYLD_INTERPOSE(_replacement,_replacee) \
   __attribute__((used)) static struct{ const void* replacement; const void* replacee; } _interpose_##_replacee \
            __attribute__ ((section ("__DATA,__interpose"))) = { (const void*)(unsigned long)&_replacement, (const void*)(unsigned long)&_replacee };

#if defined(MAC_OS_CATALINA)
extern xpc_object_t xpc_copy_entitlements_for_self(void);

xpc_object_t xpc_never_copy_entitlements_for_self(void)
{
	return NULL;
}

DYLD_INTERPOSE(xpc_never_copy_entitlements_for_self, xpc_copy_entitlements_for_self);
#else
extern xpc_object_t xpc_copy_entitlements_for_pid(pid_t pid);

xpc_object_t xpc_never_copy_entitlements_for_pid(pid_t pid)
{
	return NULL;
}

DYLD_INTERPOSE(xpc_never_copy_entitlements_for_pid, xpc_copy_entitlements_for_pid);
#endif